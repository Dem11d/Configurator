<?phpclass AdminCaseBackgroundController{    public function initContent()    {        $basePath = $_SERVER['DOCUMENT_ROOT'];        /*here we save uplaod post image*/  		if(isset($_FILES["fileuplaod"]["name"])){  			$filename = $_FILES["fileuplaod"]["name"];  			$ext = substr(strrchr($filename, "."), 1);  			if(strtolower(trim($ext)) == 'jpg' || strtolower(trim($ext)) == 'png' || strtolower(trim($ext)) == 'gif') {  				$image_name = uniqid();  				$filename = $image_name . '.' . $ext;  				if(move_uploaded_file($_FILES["fileuplaod"]["tmp_name"],_PS_ROOT_DIR_.'/img/customImage/design_bg/' . $filename)){  					//echo 'success';  				}  				else{  					//echo "fail";  				}  			}  			else {  				//echo 'fail';  			}		}		/**/		//parent::initContent();		$ps__base_url = 'ps.loc/';		$base_url_module = $ps__base_url . 'modules/mobilecasedesign/';				$patterns= array();		if ($handle2 = opendir($basePath . '/img/customImage/patterns')) {			$did = 0;			while (false !== ($entry = readdir($handle2))) {				if(isset($entry) && $entry !='.' && $entry !='..'){					$patterns[] = array(						'pattern'		=> $entry,						'id'			=> 'str_' . $did					);				}				$did++;			}			closedir($handle2);		}				$clipart_coll = array();		$did = 0;		if ($handle2 = opendir($basePath . '/img/customImage/clipart')) {			while (false !== ($entry = readdir($handle2))) {				if(isset($entry) && $entry !='.' && $entry !='..'){					$clipart_coll[] = array(						'clipart'		=> $entry,						'id'			=> 'str_' . $did					);				}				$did++;			}		closedir($handle2);		}    $did = 0;    if ($handleDeviceDir = opendir($basePath . '/img/customImage/device')) {        while (false !== ($entry = readdir($handleDeviceDir))) {            if(isset($entry) && $entry !='.' && $entry !='..'){                $phoneName  = explode('/', $entry );                list($phoneName, $phoneVersion) = explode('_', $phoneName[ count($phoneName) - 1 ]);                $phoneVersion = pathinfo($phoneVersion, PATHINFO_FILENAME);                    $device_coll[] = array(                        'device'		=> $entry,                        'id'			=> 'str_' . $did,                        'phone_name'    => $phoneName,                        'phone_version' => $phoneVersion                    );            }            $did++;        }        closedir($handleDeviceDir);    }    $did = 0;        if ($handleDeviceDir = opendir($basePath . '/img/customImage/android')) {                while (false !== ($entry = readdir($handleDeviceDir))) {                    if(isset($entry) && $entry !='.' && $entry !='..'){                        $phoneName  = explode('/', $entry );                        list($phoneName, $phoneVersion) = explode('_', $phoneName[ count($phoneName) - 1 ]);                        $phoneVersion = pathinfo($phoneVersion, PATHINFO_FILENAME);                        $device_android[] = array(                            'android'		=> $entry,                            'phone_name'    => $phoneName,                            'phone_version' => $phoneVersion,                            'id'			=> 'str_' . $did                        );                    }                    $did++;                }                closedir($handleDeviceDir);            }            $did = 0;    if ($handle2 = opendir($basePath . '/img/customImage/design_bg')) {			while (false !== ($entry = readdir($handle2))) {				if(isset($entry) && $entry !='.' && $entry !='..'){					$design_coll[] = array(						'clipart'		=> $entry,						'id'			=> 'str_' . $did					);				}				$did++;			}		closedir($handle2);		}		return array(            'device_coll'   => $device_coll,            'device_android'   => $device_android,			'clipart_array'	=> $clipart_coll,			'design_array'	=> $design_coll,			'root_path'		=> $ps__base_url,			'module_path'	=> $base_url_module,			'patterns'	=> $patterns,			/*'token'			=> $this->token*/		);    }	public function getPSBaseUrl()	{		$base_url = '';		$result = Db::getInstance()->getRow('SELECT * FROM '._DB_PREFIX_.'shop_url');		if(count($result) > 0){			$domian = 'http://' . $result['domain'];			$physical_uri = $result['physical_uri'];			$base_url = $domian . $physical_uri;		}		return $base_url;	}}?>